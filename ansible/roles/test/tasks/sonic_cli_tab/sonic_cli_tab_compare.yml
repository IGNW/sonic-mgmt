- block:
  # This will exercize the tab autocomplete but should prevent execution of any commands
  # This also has the added benefit of making long running show commands not execute so the play is faster
  - name: Execute the command '{{ command }}' followed by [tab] [tab] 
    raw: "echo {{ command }} $'\t'$'\t' fake | bash -i 2>&1"
    register: tab_command_output
    failed_when: > 
      ('testfile.deleteme' not in tab_command_output.stdout) and
      ('Error: Got unexpected extra argument' not in tab_command_output.stdout) and
      ('Error: No such command' not in tab_command_output.stdout)

  - name: verify 'testfile.deleteme' not in the output of {{ item.key }}
    assert:
      that: "'testfile.deleteme' not in tab_command_output.stdout"
    when: "{{ item.value }} == True"
    
  - name: verify 'testfile.deleteme' in the output of {{ item.key }} 
    assert:
      that: "'testfile.deleteme' in tab_command_output.stdout"
    when: "{{ item.value }} == False"

  rescue:
  - name: output
    debug:
      msg: the command failed

