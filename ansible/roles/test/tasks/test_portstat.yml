- block:

  - name: Clear all saved stats prior to tests
    shell: portstat -D || true

  - name: Test portstat clear
    shell: portstat -c

  - name: Test portstat json output
    shell: portstat -j | python -m json.tool

  - name: Test portstat raw output
    shell: portstat -r

  - name: Test portstat all
    shell: portstat -a

  - name: Test portstat period
    shell: portstat -p 30

  - name: Test portstat clear and save stats
    shell: portstat -c -t test

  - name: Test portstat json output
    shell: portstat -j -t test | python -m json.tool

  - name: Test portstat raw output
    shell: porstat -r -t test

  - name: Test portstat all stat counters
    shell: portstat -a -t test

  - name: Test portstat period
    shell: portstat -p 30 -t test

  - name: Test deleting counter
    shell: portstat -d -t test
  
  always:
  - name: Clear and reset counters
    shell: portstat -D
  
  ignore_errors: true