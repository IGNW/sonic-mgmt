- block:
  - name: Test show (Top Level)
    shell: show {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - " "
      - aaa
      - acl
      - arp
      - bgp
      - clock
      - ecn
      - environment
      - interfaces
      - ip
      - ipv6
      - line
      - lldp
      - logging
      - mac
      - mirror_session
      - mmu
      - ndp
      - ntp
      - pfc
      - platform
      - priority-group
      - processes
      - queue
      - reboot-cause
      - route-map
      - runningconfiguration
      - services
      - startupconfiguration
      - system-memory
      - tacacs
      - techsupport
      - uptime
      - users
      - version
      - vlan
      - warm_restart
      - watermark
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show acl
    shell: show acl {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - rule
      - table
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp incomplete commands
    shell: show bgp {{item}}
    with_items:
      - community-list
      - dampening
      - filter-list
      - large-community-list
      - prefix-list
      - route-map
    register: command_results
    failed_when: "'Command incomplete' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp
    shell: show bgp {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - attribute-info
      - cidr-only
      - community
      - community-info
      - detail
      - ipv4
      - ipv6
      - json
      - large-community
      - memory
      - neighbors
      - nexthop
      - paths
      - peer-group
      - "regexp /*/"
      - route-leak
      - statistics
      - summary
      - update-groups
      - view
      - views
      - vrf
      - vrfs
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp cidr-only
    shell: show bgp cidr-only {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community with ambiguous commands
    shell: show bgp community {{item}}
    with_items:
      - accept-own-nexthop
      - local-AS
      - no-advertise
      - no-export
    register: command_results
    failed_when: "'Ambiguous command' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community 
    shell: show bgp community {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - accept-own
      - blackhole
      - exact-match
      - graceful-shutdown
      - json
      - llgr-stale
      - no-llgr
      - route-filter-translated-v4
      - route-filter-translated-v6
      - route-filter-v4
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community accept-own
    shell: show bgp community accept-own {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community accept-own-nexthop ambiguous command
    shell: show bgp community accept-own-nexthop {{item}}
    with_items:
      - exact-match
    register: command_results
    failed_when: "'Ambiguous command' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community accept-own-nexthop
    shell: show bgp community accept-own-nexthop {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
      - route-filter-v6
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community blackhole
    shell: show bgp community blackhole {{item}}    
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community exact-match
    shell: show bgp community exact-match {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community graceful-shutdown
    shell: show bgp community graceful-shutdown {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
      - no-peer
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community graceful-shutdown
    shell: show bgp community graceful-shutdown exact-match {{item}}
    with_items: 
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community graceful-shutdown no-peer
    shell: show bgp community graceful-shutdown no-peer {{item}}
    with_items: 
      - "--help"
      - "-h"
      - "-?"
      - exact-match
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community llgr-stale
    shell: show bgp community llgr-stale {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community local-AS ambiguous command
    shell: show bgp community local-AS {{item}}      
    with_items: 
      - exact-match
    register: command_results
    failed_when: "'Ambiguous command' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community local-AS
    shell: show bgp community local-AS {{item}}      
    with_items: 
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community no-advertise ambiguous command
    shell: show bgp community no-advertise {{item}}      
    with_items:
      - exact-match
    register: command_results
    failed_when: "'Ambiguous command' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community no-advertise
    shell: show bgp community no-advertise {{item}}      
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community no-export ambiguous command
    shell: show bgp community no-export {{item}}
    with_items:
      - exact-match
    register: command_results
    failed_when: "'Ambiguous command' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community no-export
    shell: show bgp community no-export {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community no-llgr
    shell: show bgp community no-llgr {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community route-filter-translated-v4
    shell: show bgp community route-filter-translated-v4 {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community route-filter-translated-v6
    shell: show bgp community route-filter-translated-v6 {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp community route-filter-v4
    shell: show bgp community route-filter-v4 {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - exact-match
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp dampening
    shell: show bgp dampening {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - dampened-paths
      - flap-statistics
      - parameters
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp detail
    shell: show bgp detail {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"    
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp ipv4 command incomplete
    shell: show bgp ipv4 {{item}}
    with_items:
      - community-list
      - dampening
      - filter-list
      - large-community-list
      - prefix-list
      - regexp
      - route-map
    register: command_results
    failed_when: "'Command incomplete' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp ipv4
    shell: show bgp ipv4 {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - cidr-only
      - community
      - flowspec
      - json
      - labeled-unicast
      - large-community
      - multicast
      - neighbors
      - route-leak
      - statistics
      - summary
      - unicast
      - update-groups
      - vpn
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp ipv6 command incomplete
    shell: show bgp ipv6 {{item}}
    with_items:
      - community-list
      - dampening
      - filter-list
      - large-community-list
      - prefix-list
      - regexp
      - route-map
    register: command_results
    failed_when: "'Command incomplete' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp ipv6
    shell: show bgp ipv6 {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - cidr-only
      - community
      - flowspec
      - json
      - labeled-unicast
      - large-community
      - multicast
      - neighbors
      - route-leak
      - statistics
      - summary
      - unicast
      - update-groups
      - vpn
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp l2vpn
    shell: show bgp l2vpn {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - evpn
  
  - name: Test show bgp large-community
    shell: show bgp large-community {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp martian
    shell: show bgp martian {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - next-hop
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp multicast
    shell: show bgp multicast {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - paths
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp neighbors
    shell: show bgp neighbors {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp nexthop
    shell: show bgp nexthop {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - detail
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp route-leak
    shell: show bgp route-leak {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp summary
    shell: show bgp summary {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp unicast
    shell: show bgp unicast {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - paths
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp update-groups
    shell: show bgp update-groups {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - advertise-queue
      - advertised-routes
      - packet-queue
      - statistics
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp update-groups advertise-queue
    shell: show bgp update-groups advertise-queue {{item}}  
    with_items:
      - "--help"
      - "-h"
      - "-?"    
      - advertise-queue
      - advertised-routes
      - packet-queue
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp update-groups advertised-routes
    shell: show bgp update-groups advertised-routes {{item}}  
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - advertise-queue
      - advertised-routes
      - packet-queue
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp update-groups packet-queue
    shell: show bgp update-groups packet-queue {{item}}  
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - advertise-queue
      - advertised-routes
      - packet-queue
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp update-groups statistics
    shell: show bgp update-groups statistics {{item}}  
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - advertise-queue
      - advertised-routes
      - packet-queue
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp view
    shell: show bgp view {{item}}
    with_items: 
      - "--help"
      - "-h"
      - "-?"
      - all
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp vpn
    shell: show bgp vpn {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - paths
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp vrf
    shell: show bgp vrf {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - all
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show bgp vrfs
    shell: show bgp vrfs {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - json
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show interfaces
    shell: show interfaces {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - counters
      - description
      - naming_mode
      - neighbor
      - portchannel
      - status
      - transceiver
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show interfaces neighbor
    shell: show interfaces neighbor {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - expected
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show interfaces transceiver
    shell: show interfaces transceiver {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - eeprom
      - lpmode
      - presence
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show ip
    shell: show ip {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - interfaces
      - prefix-list
      - protocol
      - route
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show ip prefix-list
    shell: show ip prefix-list {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - detail
      - summary
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show ip route command incomplete
    shell: show ip route {{item}}
    with_items:
      - tag
      - vrf
    register: command_results
    failed_when: "'Command incomplete' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show ip route
    shell: show ip route {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - babel
      - bgp
      - connected
      - eigrp
      - isis
      - json
      - kernel
      - nhrp
      - ospf
      - rip
      - sharp
      - static
      - summary
      - supernets-only
      - table
      - vnc
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show ipv6
    shell: show ipv6 {{item}}
    with_items: 
      - "--help"
      - "-h"
      - "-?"
      - interfaces
      - protocol
      - route
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show ipv6 route command incomplete
    shell: show ipv6 route {{item}}
    with_items:
      - tag
      - vrf
    register: command_results
    failed_when: "'Command incomplete' not in command_results.stdout"
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show ipv6 route
    shell: show ipv6 route {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - babel
      - bgp
      - connected
      - isis
      - json
      - kernel
      - nhrp
      - ospf6
      - ripng
      - sharp
      - static
      - summary
      - table
      - vnc
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show lldp
    shell: show lldp {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - neighbors
      - table
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show pfc
    shell: show pfc {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - counters
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show platform
    shell: show platform {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - psustatus
      - summary
      - syseeprom
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name:  Test show priority-group
    shell: show priority-group {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - persistent-watermark
      - watermark
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show priority-group persistent-watermark
    shell: show priority-group persistent-watermark {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - headroom
      - shared
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show priority-group watermark
    shell: show priority-group watermark {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - headroom
      - shared
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show processes
    shell: show processes {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - cpu
      - memory
      - summary
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show queue
    shell: show queue {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - counters
      - persistent-watermark
      - watermark
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show queue persistent-watermark
    shell: show queue persistent-watermark {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - multicast
      - unicast
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show queue watermark
    shell: show queue watermark {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - multicast
      - unicast
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show runningconfiguration
    shell: show runningconfiguration {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - all
      - bgp
      - interfaces
      - ntp
      - snmp
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show startupconfiguration
    shell: show startupconfiguration {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - bgp
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show vlan
    shell: show vlan {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - brief
      - config
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show warm_restart
    shell: show warm_restart {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - config
      - state
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show watermark
    shell: show watermark {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - telemetry
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

- block:
  - name: Test show watermark telemetry
    shell: show watermark telemetry {{item}}
    with_items:
      - "--help"
      - "-h"
      - "-?"
      - interval
  rescue:
    - name: Failed item
      debug:
        msg: "A command has failed"

